(this.webpackJsonpreviewapp=this.webpackJsonpreviewapp||[]).push([[0],{40:function(e,t){},46:function(e,t,c){},47:function(e,t,c){},55:function(e,t,c){},58:function(e,t,c){},59:function(e,t,c){},60:function(e,t,c){},61:function(e,t,c){},62:function(e,t,c){},63:function(e,t,c){},65:function(e,t,c){},66:function(e,t){},67:function(e,t,c){"use strict";c.r(t);var n=c(2),a=c.n(n),s=c(29),r=c.n(s),i=(c(46),c(8)),l=(c(47),c(11)),o=c(17),d=c(31),u=d.a.initializeApp({apiKey:"AIzaSyCVjmzEDUHl8v249PG5DH2F52VTivUOp4U",authDomain:"car-rev.firebaseapp.com",projectId:"car-rev",storageBucket:"car-rev.appspot.com",messagingSenderId:"381340381518",appId:"1:381340381518:web:89316b019fc5a23fd92e1f"}).firestore(),j=d.a.auth(),b=c(14),m="SET_USER",h="RESET_USER",O={user:null},f=function(e){return{type:m,user:e}},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(b.a)(Object(b.a)({},e),{},{user:t.user});case h:return Object(b.a)(Object(b.a)({},e),{},{user:null});default:return e}},x=c.p+"static/media/accountIcon.eb9ca6bb.svg",p=(c(55),c(3)),_=function(){var e=Object(l.c)((function(e){return e.authReducer.user})),t=Object(l.b)();return Object(p.jsx)("header",{className:"header",children:Object(p.jsxs)("nav",{className:"header__inner",children:[Object(p.jsxs)("ul",{className:"header__nav",children:[Object(p.jsx)("li",{className:"header__item",children:Object(p.jsx)(o.b,{to:"/",children:"Catalog"})}),Object(p.jsx)("li",{className:"header__item",children:Object(p.jsx)(o.b,{to:"/About",children:"About"})})]}),Object(p.jsxs)("div",{className:"header__auth",children:[Object(p.jsxs)("div",{className:"header__user",children:[Object(p.jsx)("img",{className:"header__icon",src:x}),Object(p.jsx)("div",{className:"header__fullname",children:e.fullname})]}),Object(p.jsx)(o.b,{className:"header__signout",to:"#",onClick:function(){t({type:h}),j.signOut()},children:"(Sign Out)"})]})]})})},N=c(12),g="SET_BRAND",w="SET_MODEL",S={selectedBrand:null,selectedModel:null},y=function(e){return{type:g,brand:e}},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case g:return Object(b.a)(Object(b.a)({},e),{},{selectedBrand:t.brand});case w:return Object(b.a)(Object(b.a)({},e),{},{selectedModel:t.model});default:return e}},E=(c(58),function(){var e=Object(l.b)(),t=Object(n.useState)([]),c=Object(N.a)(t,2),a=c[0],s=c[1];Object(n.useEffect)((function(){u.collection("Brands").get().then((function(e){var t=[];e.forEach((function(e){t.push({brandName:e.data().make,modelsNum:e.data().models.length})})),s(t)}))}),[]);var r=function(t){e(y(t.target.innerHTML))};return Object(p.jsxs)("div",{className:"brands",children:[Object(p.jsx)("h1",{children:"Brands"}),Object(p.jsx)("div",{className:"brands__inner",children:a.map((function(e){return Object(p.jsxs)(o.b,{className:"brands__item",onClick:r,to:"/models",children:[Object(p.jsx)("div",{className:"brands__name",children:e.brandName}),Object(p.jsx)("div",{className:"brands__num",children:e.modelsNum})]},e.brandName)}))})]})}),B=c.p+"static/media/arrowLeft.89c4a40b.svg",I=(c(59),function(e){var t=e.path;return Object(p.jsxs)(o.b,{to:t,className:"returnButton",children:[Object(p.jsx)("img",{className:"returnButton__icon",src:B}),Object(p.jsx)("div",{className:"returnButton__text",children:"Return"})]})}),k=(c(60),function(){var e=Object(l.c)((function(e){return e.carReducer.selectedBrand})),t=Object(l.b)(),c=Object(n.useState)(null),a=Object(N.a)(c,2),s=a[0],r=a[1];return Object(n.useEffect)((function(){e?u.collection("Brands").doc(e).onSnapshot((function(e){console.log(e.data()),r(e.data())})):console.log("No brand")}),[]),Object(p.jsxs)("div",{children:[Object(p.jsx)(I,{onClick:function(){t(y(null))},path:"/"}),Object(p.jsx)("h1",{children:e}),e?Object(p.jsx)("div",{children:s?Object(p.jsx)("div",{className:"models",children:Object(p.jsx)("div",{className:"models__inner",children:s.models.map((function(e){return Object(p.jsxs)(o.b,{className:"models__item",onClick:function(){var c;t((c=e.modelName,{type:w,model:c}))},to:"models/".concat(e.modelName.toLowerCase()),children:[Object(p.jsx)("div",{className:"models__name",children:e.modelName}),Object(p.jsx)("div",{className:"models__num",children:"(".concat(e.reviews.length," reviews)")})]})}))})}):Object(p.jsx)("div",{})}):Object(p.jsx)(i.a,{to:"/"})]})}),C=function(){return Object(p.jsx)("div",{className:"about",children:"This is about page. Have a problem with reseting state when opening New Tab. Use Redux-State-Sync for this."})},A=c(15),T=(c(61),c.p+"static/media/x.6c9a4ba7.svg"),U=function(e){var t=e.text,c=e.authorName,n=e.authorId,a=e.deleteReview,s=Object(l.c)((function(e){return e.authReducer.user}));return Object(p.jsxs)("div",{className:"review",children:[Object(p.jsx)("div",{className:"review__top",children:Object(p.jsx)("div",{className:"review__author",children:c})}),Object(p.jsxs)("div",{className:"review__bottom",children:[Object(p.jsx)("div",{className:"review__text",children:t}),s.id==n&&Object(p.jsxs)("div",{onClick:function(){a(t)},className:"review__delete",children:[Object(p.jsx)("img",{className:"review__deleteIcon",src:T}),"Delete"]})]})]})},D=(c(62),function(e){var t=e.addReview,c=Object(n.useState)(""),a=Object(N.a)(c,2),s=a[0],r=a[1];return Object(p.jsxs)("div",{className:"reviewForm",children:[Object(p.jsx)("textarea",{className:"reviewForm__input",type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442 \u043e\u0442\u0437\u044b\u0432\u0430",value:s,onChange:function(e){r(e.target.value)}}),Object(p.jsx)("button",{className:"reviewForm__add",onClick:function(){t(s)},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043e\u0442\u0437\u044b\u0432"})]})}),L=(c(63),function(){var e=Object(l.c)((function(e){return e.authReducer.user})),t=Object(l.c)((function(e){return e.carReducer.selectedBrand})),c=Object(l.c)((function(e){return e.carReducer.selectedModel})),a=Object(n.useState)(null),s=Object(N.a)(a,2),r=s[0],o=s[1],d=Object(n.useState)(null),j=Object(N.a)(d,2),m=j[0],h=j[1];Object(n.useEffect)((function(){c&&u.collection("Brands").doc(t).onSnapshot((function(e){o(e.data());var t=e.data().models.find((function(e){return e.modelName==c}));h(t)}))}),[]);var O=function(e){var n=Object(A.a)(r.models);n.map((function(t){if(t.modelName!==c)return t;t.reviews=t.reviews.filter((function(t){return t.text!==e}))}));var a=Object(b.a)(Object(b.a)({},r),{},{models:n});u.collection("Brands").doc(t).update(a)};return Object(p.jsx)("div",{children:c?Object(p.jsxs)("div",{children:[Object(p.jsx)(I,{path:"/models"}),Object(p.jsx)("h1",{children:"".concat(t," ").concat(c)}),m?Object(p.jsxs)("div",{className:"modelPage__inner",children:[Object(p.jsx)(D,{addReview:function(n){var a={time:new Date,text:n,authorName:e.fullname,authorId:e.id},s=Object(A.a)(r.models);s.map((function(e){e.modelName==c&&(e.reviews=[a].concat(Object(A.a)(e.reviews)))}));var i=Object(b.a)(Object(b.a)({},r),{},{models:s});u.collection("Brands").doc(t).update(i)}}),Object(p.jsx)("div",{children:m.reviews.map((function(e){return Object(p.jsx)(U,{authorName:e.authorName,authorId:e.authorId,text:e.text,deleteReview:O})}))})]}):Object(p.jsx)("div",{children:"Loading..."})]}):Object(p.jsx)(i.a,{to:"/"})})}),M=c(41),P=(c(65),function(){var e=Object(l.b)(),t=Object(n.useState)("login"),c=Object(N.a)(t,2),a=c[0],s=c[1],r=Object(M.a)(),i=r.register,d=r.handleSubmit,u=(r.errors,function(t,c){console.log("Login ".concat(t," ").concat(c)),j.signInWithEmailAndPassword(t,c).then((function(t){e(f({fullname:t.user.displayName,email:t.user.email,id:t.user.uid}))}))}),m=function(t,c,n){console.log("Register ".concat(t," ").concat(c," ").concat(n)),j.createUserWithEmailAndPassword(c,n).then((function(c){c.user.updateProfile({displayName:t}).then((function(){e(f({fullname:c.user.displayName,email:c.user.email,id:c.user.uid}))}))}))},h="login"==a?"Sign In":"Sign Up",O="login"==a?"Sign In":"Sign Up",v="login"==a?"register":"login",x="login"==a?"Need an account?":"Already have an account?";return Object(p.jsxs)("div",{className:"auth",children:[Object(p.jsx)("h1",{className:"auth__heading",children:h}),Object(p.jsx)(o.b,{className:"auth__link",onClick:function(){s(v)},to:"#",children:x}),Object(p.jsxs)("form",{className:"auth__form",onSubmit:d((function(e){var t=e.fullname,c=e.email,n=e.password;"login"==a?u(c,n):m(t,c,n)})),children:["register"==a&&Object(p.jsx)("input",Object(b.a)({className:"auth__input",type:"text",name:"fullname",placeholder:"Fullname"},i("fullname"))),Object(p.jsx)("input",Object(b.a)({className:"auth__input",type:"email",name:"email",placeholder:"Email"},i("email"))),Object(p.jsx)("input",Object(b.a)({className:"auth__input",type:"password",name:"password",placeholder:"Password"},i("password"))),Object(p.jsx)("button",{className:"auth__button",children:O})]})]})});var F=function(){var e=Object(l.c)((function(e){return e.authReducer.user})),t=Object(l.b)();return Object(n.useEffect)((function(){j.onAuthStateChanged((function(e){e?t(f({fullname:e.displayName,email:e.email,id:e.uid})):console.log("Not logged in")}))}),[]),e?Object(p.jsx)("div",{className:"App",children:Object(p.jsxs)("div",{className:"App__body",children:[Object(p.jsx)(_,{}),Object(p.jsx)(i.b,{exact:!0,path:"/",component:function(){return Object(p.jsx)(E,{})}}),Object(p.jsx)(i.b,{exact:!0,path:"/models",component:function(){return Object(p.jsx)(k,{})}}),Object(p.jsx)(i.b,{path:"/models/:slug",component:function(){return Object(p.jsx)(L,{})}}),Object(p.jsx)(i.b,{path:"/about",component:function(){return Object(p.jsx)(C,{})}})]})}):Object(p.jsx)(P,{})},H=c(33),z=c(32),G=[Object(z.createStateSyncMiddleware)({blacklist:["TOGGLE_TODO"]})],W=Object(H.b)({carReducer:R,authReducer:v}),J=Object(H.c)(Object(z.withReduxStateSync)(W),{},H.a.apply(void 0,G));Object(z.initStateWithPrevTab)(J),window.store=J;var V=J;r.a.render(Object(p.jsx)(a.a.StrictMode,{children:Object(p.jsx)(l.a,{store:V,children:Object(p.jsx)(o.a,{children:Object(p.jsx)(F,{})})})}),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.6827f66d.chunk.js.map